{#
    Sidebar formulaire location : Aperçu du coût + lien Retour.
    Variables : edit_mode (optionnel), location (pour edit), face_id, face_obj, client_id, client_obj (pour new)
#}
<div class="col-lg-4">
    <div class="section-card cost-preview-card sticky-preview">
        <h3 class="section-title mb-3"><i class="bi bi-calculator"></i> Aperçu du coût</h3>
        <div class="cost-preview-row">
            <span>Montant mensuel</span>
            <span id="preview-mensuel">—</span>
        </div>
        <div class="cost-preview-row">
            <span>Durée</span>
            <span id="preview-duree">—</span>
        </div>
        <div class="cost-preview-row">
            <span>Date de fin</span>
            <span id="preview-datefin">—</span>
        </div>
        <hr>
        <div class="cost-preview-total d-flex justify-content-between align-items-center">
            <span class="fw-bold">Total estimé</span>
            <span id="preview-total" class="fs-5 text-primary">— FCFA</span>
        </div>
        <p class="small text-muted mt-2 mb-0">Les montants se mettent à jour automatiquement.</p>
    </div>
    <div class="mt-3">
        {% if edit_mode|default(false) and location is defined and location %}
            <a href="{{ path('app_location_show', { id: location.id }) }}" class="btn-secondary-modern w-100">
                <i class="bi bi-arrow-left"></i> Retour à la fiche
            </a>
        {% elseif face_id is defined and face_id and face_obj is defined and face_obj %}
            <a href="{{ path('app_panneau_show', {id: face_obj.panneau.id}) }}" class="btn-secondary-modern w-100">
                <i class="bi bi-arrow-left"></i> Retour au panneau
            </a>
        {% elseif client_id is defined and client_id and client_obj is defined and client_obj %}
            <a href="{{ path('app_client_show', {id: client_obj.id}) }}" class="btn-secondary-modern w-100">
                <i class="bi bi-arrow-left"></i> Retour au client
            </a>
        {% else %}
            <a href="{{ path('app_location_index') }}" class="btn-secondary-modern w-100">
                <i class="bi bi-arrow-left"></i> Retour aux locations
            </a>
        {% endif %}
    </div>
</div>
